# 产品模板系统使用说明

## 概述

产品模板系统是一个前端静态模板方案，用于存储同一类型产品的通用信息，避免每次调用API获取重复数据，提高页面加载速度。

## 核心优势

1. **减少API调用**：模板数据存储在前端，无需额外API请求
2. **提高加载速度**：模板数据即时可用，减少等待时间
3. **数据一致性**：同类产品信息统一，提升专业性
4. **易于维护**：修改模板一次，所有使用该模板的产品自动更新

## 工作原理

1. **模板匹配**：根据产品的分类/子分类slug自动匹配模板
2. **数据合并**：产品自定义数据优先，模板数据作为补充
3. **自动填充**：如果产品缺少某些字段，自动使用模板数据

## 模板结构

模板文件位置：`frontend/src/data/productTemplates.ts`

### 模板键名规则

- 使用分类/子分类的slug作为键名
- 例如：`'t-slot-aluminum-profiles'`、`'window-door-profiles'`

### 模板数据结构

```typescript
interface ProductTemplate {
  // 模板标识
  categorySlug?: string;
  subcategorySlug?: string;
  
  // 通用参数
  range_param?: string;
  type_param?: string;
  surface_treatment?: string;
  colors?: string;
  grade?: string;
  temper?: string;
  
  // 结构化数据
  specificationItems?: Array<{
    name: string;
    value: string;
    order: number;
  }>;
  
  applicationItems?: Array<{
    name: string;
    description: string;
    image?: string;
    order: number;
  }>;
  
  // 商业信息
  oemAvailable?: boolean;
  freeSamples?: string;
  supplyAbility?: string;
  // ... 更多字段
}
```

## 如何添加新模板

### 步骤1：确定模板键名

根据产品的分类slug或子分类slug确定键名，例如：
- T-Slot型材 → `'t-slot-aluminum-profiles'`
- 门窗型材 → `'window-door-profiles'`

### 步骤2：在模板文件中添加模板

编辑 `frontend/src/data/productTemplates.ts`：

```typescript
export const productTemplates: Record<string, ProductTemplate> = {
  // 添加新模板
  'your-category-slug': {
    categorySlug: 'your-category-slug',
    range_param: 'OEM factory supply aluminium profiles',
    type_param: 'Your product type',
    surface_treatment: 'Anodized, Powder Coated',
    colors: 'Silver, Black, or customized',
    grade: '6063 Series',
    temper: 'T5, T6',
    
    specificationItems: [
      { name: 'Material & Temper', value: '6063-T5', order: 1 },
      { name: 'Surface Treatment', value: 'Anodized', order: 2 },
      // ... 更多规格项
    ],
    
    applicationItems: [
      {
        name: 'Application 1',
        description: 'Description here',
        order: 1
      },
      // ... 更多应用场景
    ],
    
    oemAvailable: true,
    freeSamples: 'Available, about 1 days can be sent',
    // ... 更多商业信息
  },
};
```

### 步骤3：确保产品分类有slug

确保后端Category/SubCategory模型有slug字段，并且值匹配模板键名。

## 模板匹配优先级

1. **最高优先级**：子分类模板（`product.subcategory.slug`）
2. **第二优先级**：分类模板（`product.category.slug`）
3. **最低优先级**：默认模板（`'default'`）

## 数据合并规则

- **产品有值**：使用产品数据
- **产品无值**：使用模板数据
- **都有值**：优先使用产品数据

## 当前已实现的模板

### 1. T-Slot铝型材模板
- 键名：`'t-slot-aluminum-profiles'`
- 包含完整的规格表格、应用场景、商业信息

### 2. 门窗型材模板
- 键名：`'window-door-profiles'`
- 包含基础参数和应用场景

### 3. 默认模板
- 键名：`'default'`
- 所有产品的基础默认值

## 使用示例

### 示例1：T-Slot产品自动使用模板

```typescript
// 产品数据
{
  id: 1,
  name: 'HG112 150x30 T-Slot Profile',
  category: { slug: 't-slot-aluminum-profiles' },
  // 缺少很多字段
}

// 系统自动匹配模板并合并
// → 自动填充规格表格、应用场景、商业信息等
```

### 示例2：自定义产品覆盖模板

```typescript
// 产品数据
{
  id: 2,
  name: 'Custom T-Slot',
  category: { slug: 't-slot-aluminum-profiles' },
  colors: 'Custom Color', // 自定义颜色
  // 其他字段使用模板
}

// 结果：colors使用产品值，其他使用模板值
```

## 前端页面展示

模板数据会自动应用到以下区域：

1. **产品参数区域**：显示基本参数和商业信息
2. **规格表格**：使用`specification_items`展示详细规格
3. **应用场景**：使用`application_items`展示应用场景（支持图片）
4. **包装详情**：显示`packaging_details`
5. **工厂图片**：使用`factory_images`展示工厂场景

## 维护建议

1. **定期更新模板**：当通用信息变更时，更新模板文件
2. **保持一致性**：确保同类产品使用相同模板
3. **测试验证**：添加新模板后，测试产品页面显示效果
4. **文档同步**：更新模板时同步更新文档

## 注意事项

⚠️ **模板是静态的**：
- 模板数据编译到前端代码中
- 修改模板后需要重新构建前端

⚠️ **多语言支持**：
- 当前模板为英文，如需多语言需要在模板中添加语言键

⚠️ **图片路径**：
- 模板中的图片路径使用相对路径
- 确保图片文件存在于`public/images/`目录

## 未来扩展

可以扩展的功能：

1. **多语言模板**：为不同语言创建独立模板
2. **动态模板加载**：从API获取模板（如果模板经常变更）
3. **模板版本管理**：支持模板版本控制
4. **可视化模板编辑器**：后台管理界面编辑模板

## 相关文件

- 模板定义：`frontend/src/data/productTemplates.ts`
- 产品详情页：`frontend/src/pages/ProductDetail.tsx`
- 后端模型：`backend/apps/products/models.py`

